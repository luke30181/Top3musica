<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyPlaylist</title>
    <link rel="icon" href="album.png" type="image/png">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Sour+Gummy:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Sour+Gummy:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Quicksand:wght@300..700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Sour+Gummy:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">




    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <style>
        * {
            background-color: lightblue;
        }

        img {

            width: 8vw;
        }

        h1 {
            font-family: "Great Vibes", cursive, sans-serif;
            font-weight: 400;
            font-size: 100px;
            font-style: normal;
            text-align: center;
        }

        .btn {
            width: 100%;
        }

        th {
            text-align: center;
        }

        td {
            text-align: center;

        }

        .author {
            font-style: italic;
        }

        .indice {
            font-weight: bold;
        }

        tr,
        td {
            font-family: "Poppins", sans-serif;
            font-weight: 400;
            font-style: normal;
            ;
        }
    </style>
    <script>
        class hit {

            constructor(titolo, autore, anno, url) {

                this.titolo = titolo
                this.autore = autore
                this.anno = anno
                this.url = url

            }
        }
        document.addEventListener('DOMContentLoaded', function () {
            var elems = document.querySelectorAll('select');
            var instances = M.FormSelect.init(elems);
        });

        window.onload = gestoreLoad

        function gestoreLoad() {
            let lista = []
            let hit1 = new hit("In the end", "Linkin Park", 2000, "https://www.emp-online.it/dw/image/v2/BBQV_PRD/on/demandware.static/-/Sites-master-emp/default/dw2770b27a/images/4/2/6/7/426781.jpg?sfrm=png")
            let hit2 = new hit("Numb", "Linkin Park", "2003", "https://m.media-amazon.com/images/I/71-nhMkC-vL._AC_UL480_FMwebp_QL65_.jpg")
            let hit3 = new hit("Faded", "Alan Walker", "2015", "https://m.media-amazon.com/images/I/81PND-8S+iL._AC_UL480_FMwebp_QL65_.jpg")
            lista.push(hit1)
            lista.push(hit2)
            lista.push(hit3)
            let nodoTab = document.getElementById("tab")
            popolaTabella()
            function popolaTabella() {
                rimuoviFigli(nodoTab)
                for (let i = 0; i < lista.length; i++) {
                    let nodoTr = document.createElement("tr")
                    let nodoInd = document.createElement("td")
                    nodoInd.textContent = i + 1
                    nodoInd.className = "indice"
                    nodoTr.appendChild(nodoInd)
                    let nodoTitle = document.createElement("td")
                    nodoTitle.textContent = lista[i].titolo
                    nodoTr.appendChild(nodoTitle)
                    let nodoAutore = document.createElement("td")
                    nodoAutore.textContent = lista[i].autore
                    nodoAutore.className = "author"
                    nodoTr.appendChild(nodoAutore)
                    let nodoAnno = document.createElement("td")
                    nodoAnno.textContent = lista[i].anno
                    nodoTr.appendChild(nodoAnno)
                    let nodoImg = document.createElement("td")
                    let img = document.createElement("img")
                    img.src = lista[i].url
                    let nodoVid = document.createElement("td")
                    nodoImg.appendChild(img)
                    nodoTr.appendChild(nodoImg)
                    nodoTab.appendChild(nodoTr)
                }
            }
            popolaSelect()
            function popolaSelect() {
                let nodoSelect1 = document.getElementById('select1')
                let nodoSelect2 = document.getElementById('select2')
                let nodoSelect3 = document.getElementById("select3")
                rimuoviFigli(nodoSelect1)
                rimuoviFigli(nodoSelect2)
                rimuoviFigli(nodoSelect3)
                for (let i = 0; i < lista.length; i++) {
                    let nodoOpt = document.createElement('option')
                    nodoOpt.textContent = i + 1 + ". " + lista[i].titolo
                    nodoOpt.value = i + 1
                    let nodoOpt2 = document.createElement('option')
                    nodoOpt2.textContent = i + 1 + ". " + lista[i].titolo
                    nodoOpt2.value = i + 1
                    let nodoOpt3 = document.createElement('option')
                    nodoOpt3.textContent = i + 1 + ". " + lista[i].titolo
                    nodoOpt3.value = lista[i].titolo
                    nodoSelect1.appendChild(nodoOpt)
                    nodoSelect2.appendChild(nodoOpt2)
                    nodoSelect3.appendChild(nodoOpt3)
                }
                M.FormSelect.init(document.querySelectorAll('select'));
            }
            let btn = document.getElementById('btn')
            btn.onclick = cambia
            function cambia() {

                let valore1 = parseInt(document.getElementById("select1").value) - 1
                let valore2 = parseInt(document.getElementById("select2").value) - 1

                let cambio = lista[valore2]
                lista[valore2] = lista[valore1]
                lista[valore1] = cambio
                popolaSelect()
                popolaTabella()

            }
            let btn2 = document.getElementById('btn2')
            btn2.onclick = inserisci
            function inserisci() {
                let titolo = document.getElementById('titolo').value
                let autore = document.getElementById('artista').value
                let anno = document.getElementById('annoP').value
                let url = document.getElementById('url').value
                if (titolo != "" && autore != "" && anno != "" && url != "") {


                    let nuovo = new hit(titolo, autore, anno, url)
                    lista.push(nuovo)
                    popolaTabella()
                    popolaSelect()

                } else alert('Compila tutti i campi')
            }
            function rimuoviFigli(nodo) {
                while (nodo.childNodes.length > 0) {
                    nodo.removeChild(nodo.firstChild)
                }
            }
            let btn3 = document.getElementById('btn3')
            btn3.onclick = rimuovi

            function rimuovi() {
                let valore3 = document.getElementById('select3').value
                for (let i = 0; i < lista.length; i++) {
                    if (lista[i].titolo == valore3) {
                        lista.splice(i, 1)
                        popolaTabella()
                        popolaSelect()
                    }
                }
            }



        }
    </script>
</head>

<body>
    <div class="container">
        <h1> La mia playlist</h1>
        <form>
            <div class="input-field col s6">
                <input value="" required id="titolo" type="text" class="validate" min="1" max="10">
                <label for="titolo">Titolo canzone</label>
            </div>
            <div class="input-field col s6">
                <input value="" id="artista" type="text" class="validate" min="1" max="10">
                <label for="artista">Nome artista</label>
            </div>
            <div class="input-field col s6">
                <input value="" id="annoP" type="text" class="validate" min="1" max="10">
                <label for="annoP">Anno di pubblicazione</label>
            </div>
            <div class="input-field col s6">
                <input value="" id="url" type="text" class="validate" min="1" max="10">
                <label for="url">URL copertina album</label>
            </div>
            <a style="margin-bottom: 30px;" class="waves-effect waves-light btn" id="btn2">Aggiungi</a>
        </form>

        <div class="input-field col s12">
            <select id="select1">

            </select>
            <label>Seleziona la prima canzone</label>
        </div>
        <hr>
        <div class="input-field col s12">
            <select id="select2">

            </select>
            <label>Seleziona la seconda canzone</label>
        </div>
        <a style="margin-bottom: 30px;" class="waves-effect waves-light btn" id="btn">Riordina</a>
        <select id="select3">

        </select>
        <a class="waves-effect waves-light btn" id="btn3">Rimuovi</a>
        <table style="margin-top: 50px;">
            <thead>
                <tr>
                    <th>Indice</th>
                    <th>Titolo</th>
                    <th>Autore</th>
                    <th>Anno di pubblicazione</th>
                    <th>Copertina album</th>
                </tr>
            </thead>

            <tbody id="tab">


            </tbody>
        </table>
    </div>
</body>

</html>